---
title: "[DB] 트랜잭션(Transaction)이란 무엇인가?"
categories: [CS 지식, 데이터베이스]
tags: 데이터베이스
---

## 트랜잭션이란?

---

먼저 간단하게 생각하면 쪼갤 수 없는 작업의 가장 작은 최소 단위이다.

트랜잭션은 하나의 논리적인 작업 단위이다. 즉, 하나의 작업으로 생각하는 여러 가지 연산들의 모음이다.
간단한 예를 들어 생각하면 더 쉽다.<br>
A가 B에게 송금을 하는 상황이 있다고 생각해 보자.<br>
먼저 A의 계좌에서 송금액 만큼 잔고가 줄어들 것이고, B에 계좌에는 송금액 만큼 잔고가 증가할 것이다.<br>
이 두 가지 연산은 송금이라는 '작업'에서 가장 최소한의이고 이 두 연산의 묶음이 하나의 송금이라는 하나의 트랜잭션이 된다.

만약 트랜잭션으로 안 묶으면 어떤 일이 일어날까?<br>
A가 B한테 송금을 하는데 A의 잔고에서는 송금액 만큼 빠졌는데 갑자기 시스템이 뻑났다.<br>
그러면 A의 계좌에서만 송금액이 차감되고 B한테는 돈이 안 들어오는 불상사가 일어난다..

그렇기에 이러한 과정을 트랜잭션으로 지정해야 하고 트랜잭션이 지정되면 다음과 같은 4가지 속성을 보장받을 수 있다.


## 트랜잭션의 속성 - ACID

---

### 원자성(Atomicity)

- 트랜잭션 내의 연산은 데이터베이스에 모두 반영되거나 아예 반영되지 않아야 한다.
- 트랜잭션 내의 연산이 부분적으로만 완료된 상태는 존재하지 않는다.


### 일관성(Consistency)

- 트랜잭션이 실행되기 전과 후에 데이터베이스가 일관된 상태를 유지한다.
- 트랜잭션은 무결성 제약조건을 만족해야 한다.

### 독립성(Isolation)

- 트랜잭션이 진행 중이라면 해당 트랜잭션에서 사용된 데이터는 다른 트랜잭션에서 수정할 수 없다.
- 즉, 여러 트랜잭션이 동시에 진행될 때 서로의 트랜잭션이 영향을 미치지 않는다.

### 영구성(Durability)

- 트랜잭션이 성공하면 영구적으로 결과에 반영되어야 한다.
- 트랜잭션이 완료되고 데이터베이스 시스템에 충돌이 생겨 재시작 되더라도 완료된 트랜잭션은 반영된다.

> 이러한 ACID 속성은 데이터베이스의 성능 향상을 위해 개별적으로 비활성화할 수도 있다.

## 트랜잭션의 상태

---

![db-transaction](/image/db-transaction.png)

### 활동(Active)

트랜잭션이 실행 중인 상태이다.

### 실패(Failed)

트랜잭션 중에 문제가 발생하여 중단된 상태이다.

### 철회(Aborted)

실패하여 Rollback한 상태이다. (트랜잭션의 진행된 연산을 취소하여 실행 전으로 돌아간 상태)

### 부분 완료(Partially Committed)

트랜잭션은 전부 진행되었지만 Commit(실제 반영)만 하지 않은 상태이다.

### 완료(Committed)

트랜잭션이 완료되고 Commit까지 완료된 상태이다.